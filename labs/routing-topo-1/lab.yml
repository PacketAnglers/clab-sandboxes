---
# --------------------------------------------------------------
# Arista EVPN Deployment Guide Topology
# --------------------------------------------------------------

name: arista-evpn-dg

prefix: ""

mgmt:
  network: mgmt
  ipv4-subnet: 172.100.100.0/24

topology:

  defaults:
    env:
      INTFTYPE: et

  kinds:
    ceos:
      image: ceos:latest
      env:
        CLAB_MGMT_VRF: MGMT
    linux:
      image: ghcr.io/aristanetworks/aclabs/host-ubuntu:rev1.0

  nodes:

    #########################
    # DC "B" SPINE          #
    #########################

    EOS1:
      kind: ceos
      mgmt-ipv4: 172.100.100.101
      binds:
        - sn/eos1.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS1.cfg
      ports:
        - '22001:22'
        - '8001:80'
        - '44301:443'
      labels:
        graph-posX: "945"
        graph-posY: "301"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.435123078826123"
        graph-geoCoordinateLng: "9.570052336837501"
        graph-icon: router
      image: ceos:latest

    EOS2:
      kind: ceos
      mgmt-ipv4: 172.100.100.102
      binds:
        - sn/eos2.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS2.cfg
      ports:
        - '22002:22'
        - '8002:80'
        - '44302:443'
      labels:
        graph-posX: "945"
        graph-posY: "385"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "48.780061543173851"
        graph-geoCoordinateLng: "9.608447050949309"
        graph-icon: router
      image: ceos:latest

    EOS3:
      kind: ceos
      mgmt-ipv4: 172.100.100.103
      binds:
        - sn/eos3.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS3.cfg
      ports:
        - '22003:22'
        - '8003:80'
        - '44303:443'
      labels:
        graph-posX: "1043"
        graph-posY: "385"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.412002129723028"
        graph-geoCoordinateLng: "9.372201496318851"
        graph-icon: router
      image: ceos:latest

    EOS4:
      kind: ceos
      mgmt-ipv4: 172.100.100.104
      binds:
        - sn/eos4.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS4.cfg
      ports:
        - '22004:22'
        - '8004:80'
        - '44304:443'
      labels:
        graph-posX: "1043"
        graph-posY: "301"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "48.985606801907551"
        graph-geoCoordinateLng: "9.277944753479103"
        graph-icon: router
      image: ceos:latest

    EOS5:
      kind: ceos
      mgmt-ipv4: 172.100.100.105
      binds:
        - sn/eos5.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS5.cfg
      ports:
        - '22005:22'
        - '8005:80'
        - '44305:443'
      labels:
        graph-posX: "1141"
        graph-posY: "385"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.006289666573146"
        graph-geoCoordinateLng: "9.868387834594119"
        graph-icon: router
      image: ceos:latest

    EOS6:
      kind: ceos
      mgmt-ipv4: 172.100.100.106
      binds:
        - sn/eos6.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS6.cfg
      ports:
        - '22006:22'
        - '8006:80'
        - '44306:443'
      labels:
        graph-posX: "1141"
        graph-posY: "301"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.371217846430113"
        graph-geoCoordinateLng: "9.202090542273265"
        graph-icon: router
      image: ceos:latest

    EOS7:
      kind: ceos
      mgmt-ipv4: 172.100.100.107
      binds:
        - sn/eos7.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS7.cfg
      ports:
        - '22007:22'
        - '8007:80'
        - '44307:443'
      labels:
        graph-posX: "861"
        graph-posY: "343"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.353957495211816"
        graph-geoCoordinateLng: "9.656044782394945"
        graph-icon: router
      image: ceos:latest

    EOS8:
      kind: ceos
      mgmt-ipv4: 172.100.100.108
      binds:
        - sn/eos8.txt:/mnt/flash/ceos-config:ro
      # startup-config: init-configs/EOS8.cfg
      ports:
        - '22008:22'
        - '8008:80'
        - '44308:443'
      labels:
        graph-posX: "1225"
        graph-posY: "343"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "49.273371312856980"
        graph-geoCoordinateLng: "9.676907158461770"
        graph-icon: router
      image: ceos:latest

    Host1:
      kind: linux
      mgmt-ipv4: 172.100.100.201
      env:
        IPV4: 10.10.10.101/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.10.10.1
        IPV6: 2001:db8:10:10::101/64
      ports:
        - '22201:22'
      labels:
        graph-posX: "805"
        graph-posY: "343"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "48.770104184094734"
        graph-geoCoordinateLng: "9.082118841001575"
        graph-icon: router
      image: ghcr.io/aristanetworks/aclabs/host-ubuntu:rev1.0

    Host2:
      kind: linux
      mgmt-ipv4: 172.100.100.202
      env:
        IPV4: 10.20.20.101/24
        STATIC_ROUTE: 10.0.0.0/8
        GW: 10.20.20.1
        IPV6: 2001:db8:20:20::101/64
      ports:
        - '22202:22'
      labels:
        graph-posX: "1281"
        graph-posY: "343"
        graph-groupLabelPos: bottom-center
        graph-geoCoordinateLat: "48.973169547304281"
        graph-geoCoordinateLng: "9.726814261322648"
        graph-icon: router
      image: ghcr.io/aristanetworks/aclabs/host-ubuntu:rev1.0
    # Host Template
    # HostB4:
    #   kind: linux
    #   mgmt-ipv4: 172.100.100.204
    #   env:
    #     TMODE: lacp
    #     IPV4: 10.10.10.103/24
    #     STATIC_ROUTE: 10.0.0.0/8
    #     GW: 10.10.10.1
    #     IPV6: 2001:db8:10:10::103/64
    #   ports:
    #     - '22204:22'

  links:
    - endpoints: [ EOS1:et2, EOS2:et2 ]
    - endpoints: [ EOS1:et1, EOS3:et1 ]
    - endpoints: [ EOS1:et4, EOS7:et1 ]
    - endpoints: [ EOS1:et3, EOS4:et3 ]
    - endpoints: [ EOS2:et1, EOS4:et1 ]
    - endpoints: [ EOS2:et3, EOS3:et3 ]
    - endpoints: [ EOS2:et4, EOS7:et2 ]
    - endpoints: [ EOS3:et2, EOS5:et1 ]
    - endpoints: [ EOS3:et4, EOS6:et3 ]
    - endpoints: [ EOS4:et2, EOS6:et1 ]
    - endpoints: [ EOS4:et4, EOS5:et3 ]
    - endpoints: [ EOS5:et2, EOS6:et2 ]
    - endpoints: [ EOS5:et4, EOS8:et1 ]
    - endpoints: [ EOS6:et4, EOS8:et2 ]
