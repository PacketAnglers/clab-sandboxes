! Command: show running-config
! device: EOS1 (cEOSLab, EOS-4.34.2F-43232954.4342F (engineering build))
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$WgaaqrQWb.fBaeqy$mbvlQeMCEiG4JasZOWFUzfeB6dgZMgM4G0fb62EG8alL/3WCPxGgeZbNLC3ywLe5I6naYSBsX.Jpn2FBR2STi1
!
management api http-commands
   no shutdown
   !
   vrf MGMT
      no shutdown
!
switchport default mode routed
!
no service interface inactive port-id allocation disabled
!
transceiver qsfp default-mode 4x10G
!
interface defaults
   mtu 9214
!
service routing protocols model multi-agent
!
hostname EOS1
!
spanning-tree mode mstp
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
vrf instance MGMT
!
management api gnmi
   transport grpc default
      vrf MGMT
!
management api netconf
   transport ssh default
      vrf MGMT
!
aaa authorization exec default local
!
interface Ethernet1
   no switchport
   ip address 20.1.2.1/24
!
interface Ethernet2
   no switchport
   ip address 20.1.3.1/24
!
interface Loopback0
   ip address 1.0.0.1/32
!
interface Loopback1
   ip address 1.1.1.1/32
!
interface Management0
   vrf MGMT
   ip address 172.100.100.101/24
!
ip routing
no ip routing vrf MGMT
!
ip prefix-list PL-AS200-LOWPREF
   seq 10 permit 4.1.1.0/24
!
ip prefix-list PL-AS300-LOWPREF
   seq 10 permit 4.0.0.0/24
!
ip route 1.0.0.0/24 Null0
ip route 1.1.1.0/24 Null0
ip route vrf MGMT 0.0.0.0/0 172.100.100.1
!
router bgp 100
   neighbor 20.1.2.2 remote-as 200
   neighbor 20.1.3.3 remote-as 300
   network 1.0.0.0/24
   network 1.1.1.0/24
   !
   address-family ipv4
      neighbor 20.1.2.2 rcf in TRANSIT_PEERING_IN( prefix_list_v4 PL-AS200-LOWPREF )
      neighbor 20.1.3.3 rcf in TRANSIT_PEERING_IN( prefix_list_v4 PL-AS300-LOWPREF )
!
router general
   control-functions
      code
      function TRANSIT_PEERING_IN( prefix_list_type $prefixlist ) {
          if prefix match $prefixlist {
              local_preference = 75;
              return true;
          }
          else {
              return true;
          }
      }
      EOF
!
router multicast
   ipv4
      software-forwarding kernel
   !
   ipv6
      software-forwarding kernel
!
end